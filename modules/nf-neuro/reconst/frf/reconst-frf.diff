Changes in component 'nf-neuro/reconst/frf'
'modules/nf-neuro/reconst/frf/environment.yml' is unchanged
'modules/nf-neuro/reconst/frf/meta.yml' is unchanged
Changes in 'reconst/frf/main.nf':
--- modules/nf-neuro/reconst/frf/main.nf
+++ modules/nf-neuro/reconst/frf/main.nf
@@ -4,9 +4,7 @@
     tag "$meta.id"
     label 'process_single'
 
-    container "${ workflow.containerEngine == 'singularity' && !task.ext.singularity_pull_docker_container ?
-        'https://scil.usherbrooke.ca/containers/scilus_2.0.2.sif':
-        'scilus/scilus:dev' }"
+    container 'scilus/scilus:2.1.0'
 
     input:
         tuple val(meta), path(dwi), path(bval), path(bvec), path(mask), path(wm_mask), path(gm_mask), path(csf_mask)
@@ -43,7 +41,9 @@
     def md_thr_gm = task.ext.md_thr_gm ? "--md_thr_gm " + task.ext.md_thr_gm : ""
     def md_thr_csf = task.ext.md_thr_csf ? "--md_thr_csf " + task.ext.md_thr_csf : ""
 
-    def fix_frf = task.ext.manual_frf ? task.ext.manual_frf : ""
+    def axial = Math.round(meta.ad * 1E4) // To get integers.
+    def radial = Math.round(meta.rd * 1E4) // To get integers.
+    def fix_frf = task.ext.manual_frf ? task.ext.manual_frf : "${axial},${radial},${radial}"
     def fix_wm_frf = task.ext.manual_wm_frf ? task.ext.manual_wm_frf : ""
     def fix_gm_frf = task.ext.manual_gm_frf ? task.ext.manual_gm_frf : ""
     def fix_csf_frf = task.ext.manual_csf_frf ? task.ext.manual_csf_frf : ""
@@ -103,9 +103,14 @@
     """
 
     stub:
+    def axial = Math.round(meta.ad * 1E4) // To get integers.
+    def radial = Math.round(meta.rd * 1E4) // To get integers.
+    def fix_frf = task.ext.manual_frf ? task.ext.manual_frf : "${axial},${radial},${radial}"
     def prefix = task.ext.prefix ?: "${meta.id}"
 
     """
+    echo "FRF parameters used: ${fix_frf}"
+
     scil_dwi_extract_shell.py -h
     scil_frf_ssst.py -h
     scil_frf_set_diffusivities.py -h

'modules/nf-neuro/reconst/frf/tests/main.nf.test.snap' is unchanged
'modules/nf-neuro/reconst/frf/tests/nextflow_set_frf.config' is unchanged
'modules/nf-neuro/reconst/frf/tests/nextflow_msmt.config' is unchanged
'modules/nf-neuro/reconst/frf/tests/nextflow_msmt_set_frf.config' is unchanged
'modules/nf-neuro/reconst/frf/tests/tags.yml' is unchanged
'modules/nf-neuro/reconst/frf/tests/nextflow.config' is unchanged
'modules/nf-neuro/reconst/frf/tests/main.nf.test' is unchanged
************************************************************
